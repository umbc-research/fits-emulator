# fits-emulator
Emulate observations of seeing-limited point sources recorded in FITS files

# Release 1.0 20240303

# How to run
```
python3 generate.py --help
usage: fits-emulator [-h] [--level INFO|DEBUG] [--number int] [--dt float] [--ncalibration int] [--version] [--save title] --intTime float --focalLength float --pixsize float --seeing float --pollution float --thermal float --readnoise float --pts int --outdir dir --width
                     int --height int

FITS File Emulator for point sources

optional arguments:
  -h, --help            show this help message and exit
  --level INFO|DEBUG, -level INFO|DEBUG
                        Set Logging level to either INFO or DEBUG
  --number int, -n int  DEFAULT is 1. Number of frames to generate with same field parameters, separated by dt
  --dt float, -dt float
                        Number of seconds between frames Only required if --number > 1
  --ncalibration int, -c int
                        DEFAULT IS 1. Number of calibration frames to take.
  --version, -V, -version
                        show program's version number and exit

required arguments:
  --save title          Save FITS of frame
  --intTime float, -t float
                        Integration time in s
  --focalLength float, -f float
                        Focal length in mm
  --pixsize float, -s float
                        Pixel Size in um (micron)
  --seeing float        Specify lower bound of seeing in arcsec
  --pollution float     Specify background light pollution in average counts/sec
  --thermal float       Specify thermal signal in average counts/sec
  --readnoise float     Specify readnoise in counts/pixel
  --pts int, -p int     Number of point sources to generate
  --outdir dir, -O dir, -outdir dir
                        Directory where log and new FITS will be written.
  --width int, -W int, -width int
                        Number of pixels in horizontal dimensions
  --height int, -H int, -height int
                        Number of pixels in vertical dimensions

Submit github issue with any quesitons or concerns.
```

For example: 
`python3 generate.py -O test -W 1600 -H 1100 -p 14  -f 6500 -s 9 --seeing 2 --pollution 1000 --thermal 500 --readnoise 50 -t 5 --save test -c 2`



# Assumptions
1. There is currently no support for the flat + dark frames. As such, all flats generated by this are thought to be dark-corrected
2. The flat frames are further just demonstrating vignetting, there are no donuts/dust/etc
3. The darks, flats, and lights all have the same integration time
4. There is currently no support for filters
5. There is currently only support for calibration to ToT Counts Flux
6. Direct any questions to Roy via Discord and/or open gitHub issues whenever appropriate  

# Resources
https://homepage.physics.uiowa.edu/~pkaaret/2018s_a4850/Lab02_noise.html


# Environment Setup
python3 -m virtualenv venv  
created virtual environment CPython3.9.6.final.0-64 in 386ms
  creator CPython3macOsFramework(dest=/Users/proutyr1/Documents/git/fits-emulator/venv, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/Users/proutyr1/Library/Application Support/virtualenv)
    added seed packages: pip==24.0, setuptools==69.1.0, wheel==0.42.0
  activators BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator,PythonActivator
[proutyr1@/Users/proutyr1/Documents/git/fits-emulator]
source ./venv/bin/activate
(venv) [proutyr1@/Users/proutyr1/Documents/git/fits-emulator]
pip list
Package    Version
---------- -------
pip        24.0
setuptools 69.1.0
wheel      0.42.0
(venv) [proutyr1@/Users/proutyr1/Documents/git/fits-emulator]

pip3 install numpy matplotlib astropy scipy argparse
pip list          
Package             Version
------------------- -------------------
astropy             6.0.0
astropy-iers-data   0.2024.2.26.0.28.55
contourpy           1.2.0
cycler              0.12.1
fonttools           4.49.0
importlib_resources 6.1.2
kiwisolver          1.4.5
matplotlib          3.8.3
numpy               1.26.4
packaging           23.2
pillow              10.2.0
pip                 24.0
pyerfa              2.0.1.1
pyparsing           3.1.1
python-dateutil     2.9.0.post0
PyYAML              6.0.1
scipy               1.12.0
setuptools          69.1.0
six                 1.16.0
wheel               0.42.0
zipp                3.17.0
